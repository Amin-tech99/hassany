[build]
builder = "nixpacks"

[deploy]
startCommand = "npm run start"
healthcheckPath = "/"
healthcheckTimeout = 100

[phases.setup]
cmds = [
  "apt-get update",
  "apt-get install -y ffmpeg python3 python3-pip"
]

[phases.install]
cmds = [
  "npm install",
  "pip3 install -r requirements.txt"
]

[phases.build]
cmds = [
  "npm run build"
]

[mounts]
source = "/data"
destination = "/app/uploads"